<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Update the SAFE index file — updateIndex • safedata</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Update the SAFE index file — updateIndex" />

<meta property="og:description" content="The SAFE index file contains version and file-download information for all
SAFE projects that have been requested by the user through the 
safedata package. The intended use of the index file is to provide
an offline cache of information associated with the varied records on the
SAFE Zenodo database to streamline operation of safedata and 
reduce redundancies. The index file is a dataframe stored (by default) in
the SAFE_data_dir. Records are grouped by concept ID. Meta 
information, including DOI, record ID, date created, ddataset embargo
status, open date, and local file download status (TRUE/FALSE) are then
saved for each record within the concept IDs requested. Every time a call
is made to the Zenodo database for a SAFE dataset, updateIndex runs,
either adding new version data or overwriting existing entries, depending
on whether the concept ID has been previously requested." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">safedata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/using_safe_data.html">Using the safe_data package</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Update the SAFE index file</h1>
    
    <div class="hidden name"><code>updateIndex.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>The SAFE index file contains version and file-download information for all
SAFE projects that have been requested by the user through the 
<code>safedata</code> package. The intended use of the index file is to provide
an offline cache of information associated with the varied records on the
SAFE Zenodo database to streamline operation of <code>safedata</code> and 
reduce redundancies. The index file is a dataframe stored (by default) in
the <code>SAFE_data_dir</code>. Records are grouped by concept ID. Meta 
information, including DOI, record ID, date created, ddataset embargo
status, open date, and local file download status (TRUE/FALSE) are then
saved for each record within the concept IDs requested. Every time a call
is made to the Zenodo database for a SAFE dataset, <code>updateIndex</code> runs,
either adding new version data or overwriting existing entries, depending
on whether the concept ID has been previously requested.</p>
    
    </div>

    <pre class="usage"><span class='fu'>updateIndex</span>(<span class='no'>id</span>, <span class='kw'>isConceptId</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>dir</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>id</th>
      <td><p>the concept ID/record ID associated with the version of the SAFE
project being accessed</p></td>
    </tr>
    <tr>
      <th>isConceptId</th>
      <td><p>boolean indicating whether parameter <code>ID</code> is a 
concept ID or a record ID. This changes the operation of the function</p></td>
    </tr>
    <tr>
      <th>dir</th>
      <td><p>the directory into which the index.rds file should be stored,
which defaults to the <code>SAFE_data_dir</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>updateIndex</code> takes a Zenodo ID as its main input, which may be a
concept ID (the default, <code>isConceptId = TRUE</code>), or the ID of a
specific record entry (<code>isConceptId = FALSE</code>). Under the default
behaviour, information pertaining to all versions of a particular concept
are accessed through a call to <code><a href='zenodoVersionsApiLookup.html'>zenodoVersionsApiLookup</a></code> and
stored within the index file. When a record ID is passed as input, it is
assumed that it is because the dataset associated with this version has
been downloaded and, after a directory check, the download status of this
entry is modified. At the end of each call the modified index dataframe is
saved in the local SAFE directory.</p>
<p>The SAFE index file is used downstream to identify and notify the user of
the most recent available versions of a project, or in the event that the
user is attempting to access a dataset that already exists within the
<code>SAFE_data_dir</code>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='zenodoVersionsApiLookup.html'>zenodoVersionsApiLookup</a></code>, <code><a href='setSafeDir.html'>setSafeDir</a></code>,
  <code><a href='buildVersionsDataframe.html'>buildVersionsDataframe</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>  <span class='co'># add version information for concept ID 3081058</span>
  <span class='fu'><a href='setSafeDir.html'>setSafeDir</a></span>(<span class='st'>"C:/Users/User/SAFE_data/"</span>)</div><div class='output co'>#&gt; <span class='error'>Error in setSafeDir("C:/Users/User/SAFE_data/"): could not find function "setSafeDir"</span></div><div class='input'>  <span class='fu'>updateIndex</span>(<span class='fl'>3081058</span>)</div><div class='output co'>#&gt; <span class='error'>Error in updateIndex(3081058): Directory not supplied and SAFE_data_dir not set! See setSafeDir() function</span></div><div class='input'>
  <span class='co'># update download status of record 3081059 to TRUE</span>
  <span class='fu'>updateIndex</span>(<span class='fl'>3081059</span>, <span class='kw'>isConceptId</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; <span class='error'>Error in updateIndex(3081059, isConceptId = FALSE): Directory not supplied and SAFE_data_dir not set! See setSafeDir() function</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Andy Aldersley, David Orme.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

